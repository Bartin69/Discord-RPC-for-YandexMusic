:: ะฃััะฐะฝะพะฒะบะฐ ะบะพะดะธัะพะฒะบะธ ะดะปั ะฟะพะดะดะตัะถะบะธ ะบะธัะธะปะปะธัั
chcp 65001 >nul

@echo off
:: ะัะพะฒะตัะบะฐ ะธ ะฒะบะปััะตะฝะธะต ะฟะพะดะดะตัะถะบะธ ANSI-ัะฒะตัะพะฒ
reg query "HKCU\Console" /v VirtualTerminalLevel >nul 2>&1
if %errorlevel% neq 0 (
    echo ะะบะปััะตะฝะธะต ะฟะพะดะดะตัะถะบะธ ANSI-ัะฒะตัะพะฒ...
    reg add HKCU\Console /v VirtualTerminalLevel /t REG_DWORD /d 1 /f >nul
    echo ะะตัะตะทะฐะฟัััะธัะต ะบะพะฝัะพะปั ะธ ะทะฐะฟัััะธัะต ัะบัะธะฟั ัะฝะพะฒะฐ.
    pause
    exit /b
)

:: ะฃััะฐะฝะพะฒะบะฐ ะบะพะดะธัะพะฒะบะธ ะดะปั ะฟะพะดะดะตัะถะบะธ ะบะธัะธะปะปะธัั
chcp 65001 >nul

:: ะัะธััะบะฐ ัะบัะฐะฝะฐ
cls

:: ะะฐะณะพะปะพะฒะพะบ
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ [36mะกะฑะพัะบะฐ Yandex Music RPC ะฒ .exe[0m            โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.

:: ะัะพะฒะตัะบะฐ Python
echo [33m[*] ะัะพะฒะตัะบะฐ ัััะฐะฝะพะฒะบะธ Python...[0m
python --version >nul 2>&1
if %errorlevel% neq 0 (
    echo [31m[ะะจะะะะ] Python ะฝะต ัััะฐะฝะพะฒะปะตะฝ ะธะปะธ ะฝะต ะดะพะฑะฐะฒะปะตะฝ ะฒ PATH.[0m
    pause
    exit /b
)
echo [32m[ะฃะกะะะฅ] Python ัััะฐะฝะพะฒะปะตะฝ.[0m
echo.

:: ะัะพะฒะตัะบะฐ pip
echo [33m[*] ะัะพะฒะตัะบะฐ ัััะฐะฝะพะฒะบะธ pip...[0m
python -m pip --version >nul 2>&1
if %errorlevel% neq 0 (
    echo [31m[ะะจะะะะ] pip ะฝะต ัััะฐะฝะพะฒะปะตะฝ. ะฃััะฐะฝะพะฒะบะฐ pip...[0m
    curl -s https://bootstrap.pypa.io/get-pip.py -o get-pip.py
    python get-pip.py >nul
    if %errorlevel% neq 0 (
        echo [31m[ะะจะะะะ] ะะต ัะดะฐะปะพัั ัััะฐะฝะพะฒะธัั pip.[0m
        pause
        exit /b
    )
    del get-pip.py
    echo [32m[ะฃะกะะะฅ] pip ัััะฐะฝะพะฒะปะตะฝ.[0m
)
echo [32m[ะฃะกะะะฅ] pip ัััะฐะฝะพะฒะปะตะฝ.[0m
echo.

:: ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
echo [33m[*] ะัะพะฒะตัะบะฐ ะธ ัััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน...[0m
python -m pip install --upgrade pip >nul
python -m pip install -r requirements.txt >nul
if %errorlevel% neq 0 (
    echo [31m[ะะจะะะะ] ะะต ัะดะฐะปะพัั ัััะฐะฝะพะฒะธัั ะทะฐะฒะธัะธะผะพััะธ.[0m
    pause
    exit /b
)
echo [32m[ะฃะกะะะฅ] ะะฐะฒะธัะธะผะพััะธ ัััะฐะฝะพะฒะปะตะฝั.[0m
echo.

:: ะกะฑะพัะบะฐ .exe
echo [33m[*] ะะฐะฟััะบ ัะฑะพัะบะธ .exe...[0m
python build_exe.py >nul
if %errorlevel% neq 0 (
    echo [31m[ะะจะะะะ] ะัะธะฑะบะฐ ะฟัะธ ัะฑะพัะบะต .exe.[0m
    pause
    exit /b
)
echo [32m[ะฃะกะะะฅ] ะกะฑะพัะบะฐ ะทะฐะฒะตััะตะฝะฐ ััะฟะตัะฝะพ![0m
echo.

:: ะฃะดะฐะปะตะฝะธะต ะฒัะตะผะตะฝะฝัั ะฟะฐะฟะพะบ
echo [33m[*] ะฃะดะฐะปะตะฝะธะต ะฒัะตะผะตะฝะฝัั ะฟะฐะฟะพะบ...[0m
if exist build (
    rmdir /s /q build
    echo [32m[ะฃะกะะะฅ] ะะฐะฟะบะฐ 'build' ัะดะฐะปะตะฝะฐ.[0m
)
if exist __pycache__ (
    rmdir /s /q __pycache__
    echo [32m[ะฃะกะะะฅ] ะะฐะฟะบะฐ '__pycache__' ัะดะฐะปะตะฝะฐ.[0m
)
echo.

:: ะะตัะตะผะตัะตะฝะธะต .exe ะฒ ะบะพัะตะฝั ะฟัะพะตะบัะฐ
echo [33m[*] ะะตัะตะผะตัะตะฝะธะต .exe ะฒ ะบะพัะตะฝั ะฟัะพะตะบัะฐ...[0m
if exist dist\main.exe (
    move /y dist\main.exe . >nul
    echo [32m[ะฃะกะะะฅ] ะคะฐะนะป 'main.exe' ะฟะตัะตะผะตัะตะฝ ะฒ ะบะพัะตะฝั ะฟัะพะตะบัะฐ.[0m
    rmdir /s /q dist
    echo [32m[ะฃะกะะะฅ] ะะฐะฟะบะฐ 'dist' ัะดะฐะปะตะฝะฐ.[0m
) else (
    echo [31m[ะะจะะะะ] ะคะฐะนะป 'main.exe' ะฝะต ะฝะฐะนะดะตะฝ ะฒ ะฟะฐะฟะบะต 'dist'.[0m
)
echo.

:: ะัะพะณ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ [36mะัะฟะพะปะฝัะตะผัะน ัะฐะนะป ะฝะฐัะพะดะธััั ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ.[0m โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
pause